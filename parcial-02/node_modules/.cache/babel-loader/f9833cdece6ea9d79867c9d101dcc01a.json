{"remainingRequest":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/node_modules/babel-loader/lib/index.js!/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/src/components/PosteoNuevoForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/src/components/PosteoNuevoForm.vue","mtime":1605650792000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/babel.config.js","mtime":1604343550000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/node_modules/cache-loader/dist/cjs.js","mtime":1673909588044},{"path":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/node_modules/babel-loader/lib/index.js","mtime":1673909576330},{"path":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/node_modules/cache-loader/dist/cjs.js","mtime":1673909588044},{"path":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/node_modules/vue-loader/lib/index.js","mtime":1673909584926}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIjsKaW1wb3J0IEJhc2VOb3RpZmljYWNpb24gZnJvbSAiQC9jb21wb25lbnRzL0Jhc2VOb3RpZmljYWNpb24iOwppbXBvcnQgU3Bpbm5lckxvYWRlciBmcm9tICJAL2NvbXBvbmVudHMvU3Bpbm5lckxvYWRlciI7CmltcG9ydCBwb3N0ZW9zU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL3Bvc3Rlb3MiOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQb3N0ZW9OdWV2b0Zvcm0iLAogIGNvbXBvbmVudHM6IHsKICAgIFNwaW5uZXJMb2FkZXIsCiAgICBCYXNlTm90aWZpY2FjaW9uCiAgfSwKICBwcm9wczoge30sCiAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RvcmUsCiAgICAgIGVzdGFDYXJnYW5kbzogZmFsc2UsCiAgICAgIHBvc3RlbzogewogICAgICAgIHRpdHVsbzogbnVsbCwKICAgICAgICBjdWVycG86IG51bGwsCiAgICAgICAgZmVjaGE6IG51bGwsCiAgICAgICAgZW1haWw6IHN0b3JlLmF1dGguZW1haWwsCiAgICAgICAgaWRfdXN1YXJpbzogc3RvcmUuYXV0aC5pZAogICAgICB9LAogICAgICBlcnJvcmVzOiB7CiAgICAgICAgdGl0dWxvOiBudWxsLAogICAgICAgIGN1ZXJwbzogbnVsbAogICAgICB9LAogICAgICBzdGF0dXM6IHsKICAgICAgICB0aXR1bG86IG51bGwsCiAgICAgICAgbWVuc2FqZTogbnVsbCwKICAgICAgICB0aXBvOiAnaW5mbycKICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7fSwKICBtZXRob2RzOiB7CiAgICBncmFiYXI6IGZ1bmN0aW9uIChwb3N0ZW8pIHsKICAgICAgaWYgKHRoaXMuZXN0YUNhcmdhbmRvKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgdGhpcy5lc3RhQ2FyZ2FuZG8gPSB0cnVlOwogICAgICBwb3N0ZW9zU2VydmljZS5jcmVhdGUocG9zdGVvKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmVzdGFDYXJnYW5kbyA9IGZhbHNlOwogICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLnBvc3RlbyA9IHsKICAgICAgICAgICAgdGl0dWxvOiBudWxsLAogICAgICAgICAgICBjdWVycG86IG51bGwsCiAgICAgICAgICAgIGZlY2hhOiBudWxsLAogICAgICAgICAgICBlbWFpbDogbnVsbCwKICAgICAgICAgICAgaWRfdXN1YXJpbzogbnVsbAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuZXJyb3JlcyA9IHsKICAgICAgICAgICAgdGl0dWxvOiBudWxsLAogICAgICAgICAgICBjdWVycG86IG51bGwKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLnN0b3JlLnNldFN0YXR1cyh7CiAgICAgICAgICAgIHRpdHVsbzogIsOJeGl0byIsCiAgICAgICAgICAgIG1lbnNhamU6ICJFbCBwb3N0ZW8gc2UgY3Jlw7MgZXhpdG9zYW1lbnRlLiIsCiAgICAgICAgICAgIHRpcG86ICJzdWNjZXNzIgogICAgICAgICAgfSk7CiAgICAgICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVycm9yZXMgPSByZXNwb25zZS5lcnJvcmVzOwogICAgICAgICAgdGhpcy5zdGF0dXMudGl0dWxvID0gIkVycm9yIjsKICAgICAgICAgIHRoaXMuc3RhdHVzLm1lbnNhamUgPSAiT2N1cnJpw7MgdW4gZXJyb3IgYWwgdHJhdGFyIGRlIGdyYWJhciBlbCBwb3N0ZW8uIjsKICAgICAgICAgIHRoaXMuc3RhdHVzLnRpcG8gPSAiZGFuZ2VyIjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";AA2EA;AACA;AACA;AACA;AACA;AAGA;EACAA;EACAC;IAAAC;IAAAC;EAAA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAL;QACAC;MACA;MACAK;QACAN;QACAO;QACAC;MACA;IACA;EACA;EACAC;EACAC;IACAC;MACA;QACA;MACA;MAEA;MAEAC,eACAC,eACAC;QACA;QACA;UACA;YACAd;YACAC;YACAC;YACAC;YACAC;UACA;UACA;YACAJ;YACAC;UACA;UACA;YACAD;YACAO;YACAC;UACA;UACAO;QACA;UACA;UACA;UACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["name","components","SpinnerLoader","BaseNotificacion","props","data","store","estaCargando","posteo","titulo","cuerpo","fecha","email","id_usuario","errores","status","mensaje","tipo","computed","methods","grabar","posteosService","create","then","router"],"sourceRoot":"src/components","sources":["PosteoNuevoForm.vue"],"sourcesContent":["<template>\r\n  <form action=\"#\"\r\n        method=\"post\"\r\n        @submit.prevent=\"grabar(posteo)\">\r\n\r\n    <BaseNotificacion\r\n        :titulo=\"status.titulo\"\r\n        :mensaje=\"status.mensaje\"\r\n        :tipo=\"status.tipo\"\r\n        v-if=\"status.mensaje != null\"\r\n    />\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"titulo\"\r\n             class=\"sr-only\">Asunto del posteo\r\n      </label>\r\n      <input\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          id=\"titulo\"\r\n          placeholder=\"Asunto del posteo\"\r\n          v-model=\"posteo.titulo\"\r\n          :disabled=\"estaCargando\"\r\n          :aria-describedby=\"errores.titulo != null ? 'titulo-error' : ''\">\r\n      <div\r\n          id=\"titulo-error\"\r\n          class=\"invalid-feedback\"\r\n          v-if=\"errores.titulo != null\"\r\n          :style=\"errores.titulo != null ? 'display: block' : 'display: none'\"\r\n      >\r\n        {{ errores.titulo[0] }}\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"cuerpo\"\r\n             class=\"sr-only\">Escribe sobre el tema que quieres hablar\r\n      </label>\r\n      <textarea\r\n          class=\"form-control\"\r\n          id=\"cuerpo\"\r\n          name=\"textarea\"\r\n          v-model=\"posteo.cuerpo\"\r\n          placeholder=\"Escribe sobre el tema que quieres hablar\"\r\n          rows=\"6\"\r\n          :disabled=\"estaCargando\"\r\n          :aria-describedby=\"errores.cuerpo != null ? 'cuerpo-error' : ''\">\r\n      </textarea>\r\n      <div\r\n          id=\"cuerpo-error\"\r\n          class=\"invalid-feedback\"\r\n          v-if=\"errores.cuerpo != null\"\r\n          :style=\"errores.cuerpo != null ? 'display: block' : 'display: none'\"\r\n      >\r\n        {{ errores.cuerpo[0] }}\r\n      </div>\r\n    </div>\r\n    <SpinnerLoader v-if=\"estaCargando\"/>\r\n\r\n    <div v-else class=\"button\">\r\n      <button\r\n          type=\"submit\"\r\n          class=\"btn btn-block btn-primary\">Crear nuevo tema\r\n      </button>\r\n      <router-link\r\n          to=\"/\"\r\n          class=\"btn btn-block btn-outline-secondary\"\r\n          type=\"button\">\r\n        Volver al inicio\r\n      </router-link>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport store from \"@/store\";\r\nimport BaseNotificacion from \"@/components/BaseNotificacion\";\r\nimport SpinnerLoader from \"@/components/SpinnerLoader\";\r\nimport posteosService from \"@/services/posteos\";\r\nimport router from \"@/router\";\r\n\r\n\r\nexport default {\r\n  name: \"PosteoNuevoForm\",\r\n  components: {SpinnerLoader, BaseNotificacion},\r\n  props: {},\r\n  data: function () {\r\n    return {\r\n      store,\r\n      estaCargando: false,\r\n      posteo: {\r\n        titulo: null,\r\n        cuerpo: null,\r\n        fecha: null,\r\n        email: store.auth.email,\r\n        id_usuario: store.auth.id\r\n      },\r\n      errores: {\r\n        titulo: null,\r\n        cuerpo: null\r\n      },\r\n      status: {\r\n        titulo: null,\r\n        mensaje: null,\r\n        tipo: 'info'\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  methods: {\r\n    grabar: function (posteo) {\r\n      if (this.estaCargando) {\r\n        return null;\r\n      }\r\n\r\n      this.estaCargando = true;\r\n\r\n      posteosService\r\n          .create(posteo)\r\n          .then(response => {\r\n            this.estaCargando = false;\r\n            if (response.success) {\r\n              this.posteo = {\r\n                titulo: null,\r\n                cuerpo: null,\r\n                fecha: null,\r\n                email: null,\r\n                id_usuario: null\r\n              };\r\n              this.errores = {\r\n                titulo: null,\r\n                cuerpo: null\r\n              };\r\n              this.store.setStatus({\r\n                titulo: \"Éxito\",\r\n                mensaje: \"El posteo se creó exitosamente.\",\r\n                tipo: \"success\",\r\n              });\r\n              router.push('/');\r\n            } else {\r\n              this.errores = response.errores;\r\n              this.status.titulo = \"Error\";\r\n              this.status.mensaje = \"Ocurrió un error al tratar de grabar el posteo.\";\r\n              this.status.tipo = \"danger\";\r\n            }\r\n          });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}