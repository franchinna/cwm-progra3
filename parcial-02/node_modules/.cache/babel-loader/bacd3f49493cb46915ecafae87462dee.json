{"remainingRequest":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/node_modules/babel-loader/lib/index.js!/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/node_modules/eslint-loader/index.js??ref--14-0!/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/src/services/auth.js","dependencies":[{"path":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/src/services/auth.js","mtime":1675009737199},{"path":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/babel.config.js","mtime":1604343550000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/node_modules/cache-loader/dist/cjs.js","mtime":1673909588044},{"path":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/node_modules/babel-loader/lib/index.js","mtime":1673909576330},{"path":"/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/node_modules/eslint-loader/index.js","mtime":1673909585596}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgQVBJIH0gZnJvbSAiLi4vY29uc3RhbnRzIjsKbGV0IHVzZXJEYXRhID0gewogIGlkOiBudWxsLAogIGVtYWlsOiBudWxsLAogIHVzdWFyaW86IG51bGwsCiAgaW1hZ2VuOiBudWxsCn07CmNvbnN0IGF1dGhTZXJ2aWNlID0gewogIC8qKg0KICAgKiBUcmF0YSBkZSBhdXRlbnRpY2FyIGFsIHVzdWFyaW8gY29udHJhIGxhIEFQSS4NCiAgICoNCiAgICogQHBhcmFtIHt7fX0gY3JlZGVuY2lhbGVzDQogICAqIEBwYXJhbSB7U3RyaW5nfSBjcmVkZW5jaWFsZXMuZW1haWwNCiAgICogQHBhcmFtIHtTdHJpbmd9IGNyZWRlbmNpYWxlcy5wYXNzd29yZA0KICAgKiBAcmV0dXJuIFByb21pc2UNCiAgICovCiAgbG9naW4oY3JlZGVuY2lhbGVzKSB7CiAgICByZXR1cm4gZmV0Y2goYCR7QVBJfS9sb2dpbmAsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNyZWRlbmNpYWxlcyksCiAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScKICAgIH0pLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpLnRoZW4ocmVzID0+IHsKICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgaWYgKCFyZXMuc3VjY2VzcykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBjb25zdCB1c3VhcmlvID0gcmVzLmRhdGEudXN1YXJpbzsKICAgICAgdXNlckRhdGEgPSB7CiAgICAgICAgLi4udXN1YXJpbwogICAgICB9OwogICAgICByZXR1cm4gewogICAgICAgIC4uLnVzZXJEYXRhCiAgICAgIH07CiAgICB9KTsKICB9LAogIC8qKg0KICAgKiBDaWVycmEgc2VzacOzbi4NCiAgICoNCiAgICogQHJldHVybiBQcm9taXNlDQogICAqLwogIGxvZ291dCgpIHsKICAgIHJldHVybiBmZXRjaChgJHtBUEl9L2xvZ291dGAsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScKICAgIH0pLnRoZW4ocnRhID0+IHJ0YS5qc29uKCkpLnRoZW4ocmVzID0+IHsKICAgICAgdXNlckRhdGEgPSB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgZW1haWw6IG51bGwsCiAgICAgICAgdXN1YXJpbzogbnVsbCwKICAgICAgICBpbWFnZW46IG51bGwKICAgICAgfTsKICAgICAgcmV0dXJuIHJlczsKICAgIH0pOwogIH0sCiAgLyoqDQogICAqIExvZ3VlYSBmb3J6b3NhbWVudGUgYWwgdXN1YXJpbyBwcm92aXN0byBjb21vIGFyZ3VtZW50by4NCiAgICoNCiAgICogQHBhcmFtIHt7fX0gdXNlcg0KICAgKiBAcGFyYW0ge3t9fSB1c2VyLmlkDQogICAqIEBwYXJhbSB7e319IHVzZXIuZW1haWwNCiAgICogQHBhcmFtIHt7fX0gdXNlci51c2VybmFtZQ0KICAgKiBAcGFyYW0ge3t9fSB1c2VyLmltYWdlbg0KICAgKi8KICBsb2dVc2VyKHVzZXIpIHsKICAgIHVzZXJEYXRhID0gewogICAgICAuLi51c2VyCiAgICB9OwogIH0sCiAgLyoqDQogICAqIFJldG9ybmEgdHJ1ZSBzaSBlbCB1c3VhcmlvIGVzdMOhIGF1dGVudGljYWRvLg0KICAgKiBmYWxzZSBkZSBsbyBjb250cmFyaW8uDQogICAqDQogICAqIEByZXR1cm4ge2Jvb2xlYW59DQogICAqLwogIGlzTG9nZ2VkOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdXNlckRhdGEuaWQgIT09IG51bGw7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBhdXRoU2VydmljZTs="},{"version":3,"names":["API","userData","id","email","usuario","imagen","authService","login","credenciales","fetch","method","body","JSON","stringify","credentials","then","res","json","console","log","success","data","logout","rta","logUser","user","isLogged"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/Parcial-02_Progra-III-CW_2020/parcial-02/src/services/auth.js"],"sourcesContent":["import {API} from \"../constants\";\r\n\r\nlet userData = {\r\n    id: null,\r\n    email: null,\r\n    usuario: null,\r\n    imagen: null,\r\n};\r\n\r\nconst authService = {\r\n    /**\r\n     * Trata de autenticar al usuario contra la API.\r\n     *\r\n     * @param {{}} credenciales\r\n     * @param {String} credenciales.email\r\n     * @param {String} credenciales.password\r\n     * @return Promise\r\n     */\r\n    login(credenciales) {\r\n        return fetch(`${API}/login`, {\r\n            method: 'POST',\r\n            body: JSON.stringify(credenciales),\r\n            credentials: 'include'\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                console.log(res);\r\n\r\n                if(!res.success) {\r\n                    return false;\r\n                }\r\n\r\n                const usuario = res.data.usuario;\r\n                userData = {\r\n                    ...usuario\r\n                };\r\n\r\n                return {\r\n                    ...userData\r\n                };\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Cierra sesión.\r\n     *\r\n     * @return Promise\r\n     */\r\n    logout() {\r\n        return fetch(`${API}/logout`, {\r\n            method: 'POST',\r\n            credentials: 'include'\r\n        })\r\n            .then(rta => rta.json())\r\n            .then(res => {\r\n                userData = {\r\n                    id: null,\r\n                    email: null,\r\n                    usuario: null,\r\n                    imagen: null,\r\n                };\r\n                return res;\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Loguea forzosamente al usuario provisto como argumento.\r\n     *\r\n     * @param {{}} user\r\n     * @param {{}} user.id\r\n     * @param {{}} user.email\r\n     * @param {{}} user.username\r\n     * @param {{}} user.imagen\r\n     */\r\n    logUser(user) {\r\n        userData = {...user};\r\n    },\r\n\r\n    /**\r\n     * Retorna true si el usuario está autenticado.\r\n     * false de lo contrario.\r\n     *\r\n     * @return {boolean}\r\n     */\r\n    isLogged: function() {\r\n        return userData.id !== null;\r\n    }\r\n};\r\n\r\nexport default authService;\r\n"],"mappings":"AAAA,SAAQA,GAAG,QAAO,cAAc;AAEhC,IAAIC,QAAQ,GAAG;EACXC,EAAE,EAAE,IAAI;EACRC,KAAK,EAAE,IAAI;EACXC,OAAO,EAAE,IAAI;EACbC,MAAM,EAAE;AACZ,CAAC;AAED,MAAMC,WAAW,GAAG;EAChB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,KAAK,CAACC,YAAY,EAAE;IAChB,OAAOC,KAAK,CAAE,GAAET,GAAI,QAAO,EAAE;MACzBU,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,YAAY,CAAC;MAClCM,WAAW,EAAE;IACjB,CAAC,CAAC,CACGC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,EAAE,CAAC,CACvBF,IAAI,CAACC,GAAG,IAAI;MACTE,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;MAEhB,IAAG,CAACA,GAAG,CAACI,OAAO,EAAE;QACb,OAAO,KAAK;MAChB;MAEA,MAAMhB,OAAO,GAAGY,GAAG,CAACK,IAAI,CAACjB,OAAO;MAChCH,QAAQ,GAAG;QACP,GAAGG;MACP,CAAC;MAED,OAAO;QACH,GAAGH;MACP,CAAC;IACL,CAAC,CAAC;EACV,CAAC;EAED;AACJ;AACA;AACA;AACA;EACIqB,MAAM,GAAG;IACL,OAAOb,KAAK,CAAE,GAAET,GAAI,SAAQ,EAAE;MAC1BU,MAAM,EAAE,MAAM;MACdI,WAAW,EAAE;IACjB,CAAC,CAAC,CACGC,IAAI,CAACQ,GAAG,IAAIA,GAAG,CAACN,IAAI,EAAE,CAAC,CACvBF,IAAI,CAACC,GAAG,IAAI;MACTf,QAAQ,GAAG;QACPC,EAAE,EAAE,IAAI;QACRC,KAAK,EAAE,IAAI;QACXC,OAAO,EAAE,IAAI;QACbC,MAAM,EAAE;MACZ,CAAC;MACD,OAAOW,GAAG;IACd,CAAC,CAAC;EACV,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIQ,OAAO,CAACC,IAAI,EAAE;IACVxB,QAAQ,GAAG;MAAC,GAAGwB;IAAI,CAAC;EACxB,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;EACIC,QAAQ,EAAE,YAAW;IACjB,OAAOzB,QAAQ,CAACC,EAAE,KAAK,IAAI;EAC/B;AACJ,CAAC;AAED,eAAeI,WAAW"}]}